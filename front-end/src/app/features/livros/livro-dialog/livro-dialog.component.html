<div class="dialog-header">
  <h2 mat-dialog-title>{{ isEdit ? 'Editar Livro' : 'Novo Livro' }}</h2>
  <button mat-icon-button type="button" class="close-button" (click)="onCancel()" aria-label="Fechar">
    <mat-icon>close</mat-icon>
  </button>
</div>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <mat-dialog-content>
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Título</mat-label>
      <input matInput formControlName="titulo" placeholder="Digite o título do livro">
      @if (form.get('titulo')?.invalid && form.get('titulo')?.touched) {
        <mat-error>{{ getErrorMessage('titulo') }}</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Autor</mat-label>
      <input matInput formControlName="autor" placeholder="Digite o nome do autor">
      @if (form.get('autor')?.invalid && form.get('autor')?.touched) {
        <mat-error>{{ getErrorMessage('autor') }}</mat-error>
      }
    </mat-form-field>

    @if (isEdit) {
      <div class="info-message">
        <mat-icon>info</mat-icon>
        <p>O campo "disponível" é controlado automaticamente pelo sistema de reservas.</p>
      </div>
    }
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-stroked-button type="button" (click)="onCancel()" [disabled]="loading()" class="cancel-btn">
      Cancelar
    </button>
    <button mat-flat-button type="submit" [disabled]="loading()" class="save-btn">
      {{ loading() ? 'Salvando...' : 'Salvar' }}
    </button>
  </mat-dialog-actions>
</form>
